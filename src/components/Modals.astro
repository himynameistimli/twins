---
// Modals component - contains all modal overlays
---

<!-- Child Settings Modal (includes name, weight, birth date, and medications) -->
<div class="modal-overlay" id="child-settings-modal">
  <div class="modal-box">
    <div class="modal-header">
      <h2 class="modal-title">Settings</h2>
      <button class="modal-close" data-action="close-modal">&times;</button>
    </div>
    
    <div class="modal-body">
      <!-- Name Section -->
      <div class="settings-section">
        <label class="settings-label">Name</label>
        <input 
          type="text" 
          id="name-input" 
          class="settings-input"
          placeholder="Child's name"
        />
      </div>
      
      <!-- Birth Date Section -->
      <div class="settings-section">
        <label class="settings-label">Birth Date</label>
        <input 
          type="date" 
          id="birth-date-input" 
          class="settings-input"
        />
      </div>
      
      <!-- Weight Section -->
      <div class="settings-section">
        <label class="settings-label">Weight</label>
        <div class="flex gap-2">
          <input 
            type="number" 
            id="weight-input" 
            class="settings-input flex-1"
            placeholder="kg"
            step="0.01"
            min="0"
          />
          <input 
            type="date" 
            id="weight-date-input" 
            class="settings-input flex-1"
          />
        </div>
        <div class="weight-preview">
          <div class="preview-row">
            <span class="preview-label">Projected weight:</span>
            <span id="projected-weight">--</span>
          </div>
          <div class="preview-row">
            <span class="preview-label">Daily milk target:</span>
            <span id="daily-target">--</span>
          </div>
          <div class="preview-row">
            <span class="preview-label">Per feed (~8/day):</span>
            <span id="per-feed">--</span>
          </div>
        </div>
      </div>
      
      <!-- Medications Section -->
      <div class="settings-section">
        <label class="settings-label">Medications</label>
        
        <!-- Add new medication form -->
        <div class="med-add-form">
          <input 
            type="text" 
            id="med-name" 
            class="settings-input"
            placeholder="Medication name"
          />
          
          <div class="dose-count-selector">
            <span class="dose-label">Doses per day:</span>
            <div class="dose-buttons">
              <button class="dose-count-btn selected" data-doses="1">1</button>
              <button class="dose-count-btn" data-doses="2">2</button>
              <button class="dose-count-btn" data-doses="3">3</button>
              <button class="dose-count-btn" data-doses="4">4</button>
            </div>
          </div>
          
          <div id="dose-schedule">
            <!-- Dose times will be rendered here -->
          </div>
          
          <button class="add-med-btn" data-action="save-medication">
            Add Medication
          </button>
        </div>
        
        <!-- Existing medications list -->
        <div id="med-list" class="med-list">
          <!-- Medications will be rendered here -->
        </div>
      </div>
    </div>
    
    <div class="modal-footer">
      <button class="save-btn" data-action="save-child-settings">Save</button>
    </div>
  </div>
</div>

<style is:global>
  /* Modal Overlay */
  .modal-overlay {
    @apply fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.2s ease, visibility 0.2s ease;
  }
  
  .modal-overlay.active {
    opacity: 1;
    visibility: visible;
  }
  
  /* Modal Box */
  .modal-box {
    @apply bg-panel rounded-2xl w-full max-w-md max-h-[90vh] overflow-hidden flex flex-col;
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
  }
  
  /* Modal Header */
  .modal-header {
    @apply flex items-center justify-between p-4 border-b border-border;
  }
  
  .modal-title {
    @apply text-lg font-bold text-white;
  }
  
  .modal-close {
    @apply w-8 h-8 flex items-center justify-center rounded-full bg-card text-gray-400 hover:text-white hover:bg-red-500/20 transition-all text-xl leading-none border-none cursor-pointer;
  }
  
  /* Modal Body */
  .modal-body {
    @apply flex-1 overflow-y-auto p-4;
  }
  
  /* Modal Footer */
  .modal-footer {
    @apply p-4 border-t border-border;
  }
  
  /* Settings Sections */
  .settings-section {
    @apply mb-6;
  }
  
  .settings-section:last-child {
    @apply mb-0;
  }
  
  .settings-label {
    @apply block text-xs font-semibold text-gray-400 uppercase tracking-wide mb-2;
  }
  
  .settings-input {
    @apply w-full px-3 py-2 bg-card border border-border rounded-lg text-white text-sm focus:outline-none focus:border-normal transition-colors;
  }
  
  .settings-input::placeholder {
    @apply text-gray-500;
  }
  
  /* Weight Preview */
  .weight-preview {
    @apply mt-3 p-3 bg-card/50 rounded-lg;
  }
  
  .preview-row {
    @apply flex justify-between items-center text-sm py-1;
  }
  
  .preview-label {
    @apply text-gray-400;
  }
  
  .preview-row span:last-child {
    @apply font-semibold text-white;
  }
  
  /* Dose Count Selector */
  .dose-count-selector {
    @apply flex items-center justify-between mt-3 mb-3;
  }
  
  .dose-label {
    @apply text-sm text-gray-400;
  }
  
  .dose-buttons {
    @apply flex gap-1;
  }
  
  .dose-count-btn {
    @apply w-8 h-8 rounded-lg bg-card border border-border text-gray-400 text-sm font-semibold cursor-pointer transition-all;
  }
  
  .dose-count-btn:hover {
    @apply border-normal text-white;
  }
  
  .dose-count-btn.selected {
    @apply bg-normal border-normal text-white;
  }
  
  /* Add Medication Button */
  .add-med-btn {
    @apply w-full mt-3 py-2 bg-normal text-white rounded-lg font-semibold text-sm cursor-pointer transition-all hover:bg-normal/80;
  }
  
  /* Medication List */
  .med-list {
    @apply mt-4 space-y-2;
  }
  
  .med-add-form {
    @apply p-3 bg-card/30 rounded-lg border border-border/50;
  }
  
  /* Save Button */
  .save-btn {
    @apply w-full py-3 bg-green-600 text-white rounded-lg font-semibold text-sm cursor-pointer transition-all hover:bg-green-500;
  }
  
  /* Body modal open state */
  body.modal-open {
    overflow: hidden;
  }
</style>
